<!doctype html>
<html class="h-full bg-gray-100" lang="en">
<head>
  <title>Data Contract</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  {# <script src="https://cdn.tailwindcss.com"></script> #}
  <style>
    {{ style | safe }}
  </style>
</head>
<body class="h-full">

<div class="min-h-full flex flex-col">

  <nav class="bg-white shadow-sm">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex h-16 justify-between">
        <div class="flex">
          <div class="flex flex-shrink-0 items-center mr-6">
            <a class="text-xl text-gray-900 font-semibold" href="/">
              Data Contracts
            </a>
          </div>
        </div>
        <div class="hidden sm:ml-6 sm:flex sm:items-center">
          <a href="https://datacontract.com" class="text-sky-500 hover:text-gray-700 text-sm font-semibold" target="_blank">datacontract.com</a>
        </div>
      </div>
    </div>
  </nav>

  <main class="pb-7">

    <div class="pt-5 mx-auto max-w-7xl sm:px-6 lg:px-8">
      <div>
        <div class="md:flex md:items-center md:justify-between px-4 sm:px-0">
          <div class="min-w-0 flex-1">
            <h2 class="text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight">
              Data Contract</h2>
            <div class="mt-1 flex flex-col sm:mt-0 sm:flex-row sm:flex-wrap sm:space-x-6">
              {{ datacontract.id }}
            </div>
            <div class="mt-1 flex flex-col sm:mt-0 sm:flex-row sm:flex-wrap sm:space-x-6">
              {% if datacontract.tags %}
              <div class="mt-2 flex items-center text-sm text-gray-500 whitespace-nowrap">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="mr-1.5 h-5 w-5 flex-shrink-0 text-gray-400">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M6 6h.008v.008H6V6z" />
                </svg>
                {% for tag in datacontract.tags %}
                <span class="inline-flex items-center rounded-full bg-indigo-100 px-2.5 py-0.5 text-xs font-medium text-gray-800 mr-1">
                  <span>{{ tag }}</span>
                </span>
                {% endfor %}
              </div>
              {% endif %}
            </div>
          </div>
          <div class="mt-5 flex lg:mt-0 lg:ml-4 gap-3 items-center">
            <button
              type="button"
              onclick="document.getElementById('dialog-datacontract-yaml').showModal()"
              class="inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
              <svg class="-ml-0.5 mr-1.5 h-5 w-5 text-gray-600" viewBox="-0.5 -0.5 24 24">
                <path d="m4.3125 8.145833333333334 9.104166666666668 0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="m4.3125 11.020833333333334 9.104166666666668 0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="m4.3125 5.270833333333334 6.708333333333334 0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="m4.3125 13.895833333333334 7.1875 0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="m4.3125 16.770833333333336 3.8333333333333335 0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="M8.145833333333334 22.520833333333336h-6.708333333333334a0.9583333333333334 0.9583333333333334 0 0 1 -0.9583333333333334 -0.9583333333333334v-20.125a0.9583333333333334 0.9583333333333334 0 0 1 0.9583333333333334 -0.9583333333333334h12.739125a0.9583333333333334 0.9583333333333334 0 0 1 0.6775416666666667 0.28079166666666666L18.406708333333334 4.3125a0.9583333333333334 0.9583333333333334 0 0 1 0.28079166666666666 0.6775416666666667V8.145833333333334" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="m15.045833333333333 21.370833333333334 -4.025 1.15 1.15 -4.025 6.879875 -6.879875a2.032625 2.032625 0 0 1 2.875 2.875Z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="m18.188208333333332 12.478458333333334 2.875 2.875" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="m12.170833333333333 18.495833333333334 2.875 2.875" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path>
              </svg>
              Show YAML
            </button>
          </div>
        </div>
      </div>

      <div>
        <div class="space-y-6 mt-6">
          <section id="information">
            {{ render_partial('partials/datacontract_information.html', datacontract = datacontract) }}
          </section>


          {% if datacontract.servers %}
          <section id="servers">
            <div class="px-4 sm:px-0">
              <h1 class="text-base font-semibold leading-6 text-gray-900" id="servers">Servers</h1>
              <p class="text-sm text-gray-500">Servers of the data contract</p>
            </div>

            <ul role="list" class="mt-2 divide-y divide-gray-100 overflow-hidden bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-lg">

              {% for server_name, server in datacontract.servers.items() %}
                {{ render_partial('partials/server.html', server_name = server_name, server = server) }}
              {% endfor %}

            </ul>

          </section>
          {% endif %}


          {% if datacontract.terms %}
          <section id="terms">
            {{ render_partial('partials/datacontract_terms.html', datacontract = datacontract) }}
          </section>
          {% endif %}


          <section id="models">
            <div class="flex justify-between">
              <div class="px-4 sm:px-0">
                <h1 class="text-base font-semibold leading-6 text-gray-900">
                  Data Model
                </h1>
                <p class="text-sm text-gray-500">The logical data model</p>
              </div>
            </div>

            {% for model_name, model in datacontract.models.items() %}

            <div class="mt-3 flow-root">
              <div class="-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
                <div class="inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8">
                  <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg">

                    <table class="min-w-full divide-y divide-gray-300">
                      <thead class="bg-gray-50">
                      <tr>
                        <th scope="colgroup" colspan="3" class="py-2 pl-4 pr-3 text-left font-semibold text-gray-900 sm:pl-6">
                          {% if model.title %}
                          {{ model.title }}
                          {% endif %}
                          {% if model.title != model_name %}
                          <span class="font-mono font-medium">{{ model_name }}</span>
                          {% endif %}
                          <span class="inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10">{{ model.type }}</span>
                          <div class="text-sm font-medium text-gray-500">{{ model.description }}</div>
                          {% for key, value in model.model_extra.items() %}
                          <span
                            class="inline-flex items-center rounded-md bg-blue-50 px-1 py-1 text-xs font-medium text-blue-600 ring-1 ring-inset ring-blue-500/10 mr-1 mt-1">{{ key }}: {{ value }}</span>
                          {% endfor %}
                        </th>

                      </tr>
                      </thead>
                      <tbody class="divide-y divide-gray-200 bg-white">
                      {% for field_name, field in model.fields.items() %}
                        {{ render_partial('partials/model_field.html', nested = False, field_name=field_name, field = field, level = 0) }}
                      {% endfor %}
                      </tbody>
                      {% if model.primaryKey %}
                      <tfoot class="bg-gray-50">
                      <tr>
                        <th scope="colgroup" colspan="4"
                            class="py-2 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6">
                          <span>Primary Key: {{ model.primaryKey }}</span>
                        </th>
                      </tr>
                      </tfoot>
                      {% endif %}
                    </table>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </section>

          {% if datacontract.definitions %}
          <section id="definitions">
            <div class="px-4 sm:px-0">
              <h1 class="text-base font-semibold leading-6 text-gray-900">Definitions</h1>
              <p class="text-sm text-gray-500">Domain specific definitions in the data contract</p>
            </div>

            {% for definition_name, definition in datacontract.definitions.items() %}
            {{ render_partial('partials/definition.html', definition_name = definition_name, definition = definition)}}
            {% endfor %}
          </section>
          {% endif %}

          {% if datacontract.examples %}
          <section id="examples">
            <div class="px-4 sm:px-0">
              <h1 class="text-base font-semibold leading-6 text-gray-900">Examples</h1>
              <p class="text-sm text-gray-500">Examples for models in the data contract</p>
            </div>
            {% for example in datacontract.examples %}
              {{ render_partial('partials/example.html', example = example) }}
            {% endfor %}
          </section>
          {% endif %}

          {% if datacontract.servicelevels %}
          <section id="servicelevels">
            {{ render_partial('partials/datacontract_servicelevels.html', datacontract = datacontract ) }}
          </section>
          {% endif %}

          {% if quality_specification %}
            <section id="quality">
              <div class="px-4 sm:px-0">
                <h1 class="text-base font-semibold leading-6 text-gray-900">
                  Quality
                </h1>
                <p class="text-sm text-gray-500">
                  <span>{{ datacontract.quality.type }}</span>
                </p>
              </div>
              <div class="mt-2 overflow-hidden shadow sm:rounded-lg bg-white">
                <div class="px-4 py-5 sm:px-6">
                  <div id="schema-specification" >
                      <pre><code class="text-sm">{{ quality_specification }}</code></pre>
                  </div>
                </div>
              </div>
            </section>
          {% endif %}

        </div>
      </div>

      <div class="mt-6 text-sm text-gray-400">
        Created at {{formatted_date}} with <a href="https://cli.datacontract.com" class="text-gray-400 hover:text-gray-500">Data Contract CLI</a> v{{datacontract_cli_version}}
      </div>

    </div>
  </main>

  <dialog  id="dialog-datacontract-yaml" class="relative z-10" aria-labelledby="modal-title" aria-modal="true">
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>

    <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
      <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
        <div class="relative transform rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-4/5 sm:p-6">
          <div class="absolute right-0 top-0 pr-4 pt-4">
            <button type="button" onclick="document.getElementById('dialog-datacontract-yaml').close()" class="rounded-md bg-white text-gray-400 hover:text-gray-500">
              <span class="sr-only">Close</span>
              <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
          <div>
            <div class="mt-3 mb-3 text-center sm:mt-5">

              <h3 class="text-base font-semibold leading-6 text-gray-900" id="modal-title">Data Contract YAML</h3>
            </div>
            <pre class="overflow-x-auto text-sm bg-gray-50 p-4"><code>{{datacontract_yaml}}</code></pre>
          </div>
          <div class="mt-5 sm:mt-6">
            <button type="button" onclick="document.getElementById('dialog-datacontract-yaml').close()"
                    class="inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Close</button>
          </div>
        </div>
      </div>
    </div>
  </dialog>


  <footer class="bg-white mt-auto text-sm text-gray-400">
    <div class="mx-auto max-w-7xl py-5 px-6 md:flex md:items-center md:justify-between lg:px-8">
      <div class="flex justify-center space-x-6 md:order-2">
        <div>
          <a href="https://cli.datacontract.com" class="text-gray-400 hover:text-gray-500 px-2">Data Contract CLI</a>

          <a href="https://datacontract.com" class="text-gray-400 hover:text-gray-500 px-2">Data Contract Specification</a>
        </div>


      </div>
      <div class="mt-8 md:order-1 md:mt-0">
        <p class="text-center leading-5 text-gray-400">
          Supported with ❤️ by <a href="https://datacontract-manager.com" class="text-gray-400 hover:text-gray-500">Data Contract Manager</a>
        </p>
      </div>
    </div>

  </footer>

</div>

</body>
</html>
