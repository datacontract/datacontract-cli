{% macro render_nested_properties(properties, level) %}
  <tr>
    {% for property in properties %}
    <td class="px-4 py-4 whitespace-nowrap">
      
      <div class="text-sm font-medium text-gray-900">
      {% for i in range(0,level)%}
      &nbsp;
      {% endfor %}
      {% if level > 0 %}
      â†³
      {% endif %}
      {{ property.name or "items" }}</div>
      {% if property.primaryKey %}
      <span
        class="inline-flex items-center rounded-md bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-800 ring-1 ring-inset ring-yellow-600/20">Primary Key</span>
      {% endif %}
      {% if property.partitioned %}
      <span
        class="inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-800 ring-1 ring-inset ring-blue-600/20">Partitioned</span>
      {% endif %}
      {% if property.criticalDataElement %}
      <span
        class="inline-flex items-center rounded-md bg-red-50 px-2 py-1 text-xs font-medium text-red-800 ring-1 ring-inset ring-red-600/20">Critical</span>
      {% endif %}
    </td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-500">{{
      property.businessName or "-" }}
    </td>
    <td class="px-4 py-4 whitespace-nowrap">
      <div class="text-sm text-gray-900">{{ property.logicalType }}</div>
      {% if property.physicalType and property.physicalType !=
      property.logicalType %}
      <div class="text-xs text-gray-500">{{ property.physicalType }}</div>
      {% endif %}
    </td>
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-500">
      {% if property.required %}
      <span class="text-green-600">Yes</span>
      {% else %}
      <span class="text-gray-400">No</span>
      {% endif %}
    </td>
    <td class="px-4 py-4 text-sm text-gray-500">{{ property.description or "-"
      }}
    </td>
  </tr>
    {% if property.properties %}
    {{render_nested_properties(property.properties, level+1)}}
    {% endif %}
    {% if property.items %}
    {{render_nested_properties([property.items], level+1)}}
    {% endif %}
  {% endfor %}
<!-- Mark the end of the contained fields -->
<tr style="--tw-divide-y-reverse: 2"></tr>
{% endmacro %}

<!doctype html>
<html class="h-full bg-gray-100" lang="en">
<head>
  <title>Data Contract</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  {# <script src="https://cdn.tailwindcss.com"></script> #}
  <script src="https://unpkg.com/@panzoom/panzoom@4.6.0/dist/panzoom.min.js"></script>

  <style>
    {{ style | safe }}
  </style>
</head>
<body class="h-full">
<div class="min-h-full flex flex-col">

  <nav class="bg-white shadow-sm">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex h-16 justify-between">
        <div class="flex">
          <div class="flex flex-shrink-0 items-center mr-6">
            <a class="text-xl text-gray-900 font-semibold" href="/">
              Data Contracts
            </a>
          </div>
        </div>
        <div class="hidden sm:ml-6 sm:flex sm:items-center">
          <a href="https://datacontract.com" class="text-sky-500 hover:text-gray-700 text-sm font-semibold" target="_blank">datacontract.com</a>
        </div>
      </div>
    </div>
  </nav>
  <main class="pb-7">

    <div class="pt-5 mx-auto max-w-7xl sm:px-6 lg:px-8">
      <div>
        <div class="md:flex md:items-center md:justify-between px-4 sm:px-0">
          <div class="min-w-0 flex-1">
            <h2 class="text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight">
              Data Contract</h2>
            <div class="mt-1 flex flex-col sm:mt-1 sm:flex-row sm:flex-wrap sm:space-x-6">
              {{ datacontract.id }}
            </div>
            <div class="mt-1 flex flex-col sm:mt-1 sm:flex-row sm:flex-wrap sm:space-x-4">
              <span
                class="inline-flex items-center rounded-full bg-indigo-100 px-2.5 py-0.5 text-xs font-medium text-gray-800 ">
                <span>Open Data Contract Standard {{ datacontract.apiVersion }}</span>
              </span>

              {% if datacontract.tags %}
              <div class="flex items-center text-sm text-gray-500 whitespace-nowrap">
                {% for tag in datacontract.tags %}
                <span class="inline-flex items-center rounded-full bg-indigo-100 px-2.5 py-0.5 text-xs font-medium text-gray-800 mr-1">
                  <span>{{ tag }}</span>
                </span>
                {% endfor %}
              </div>
              {% endif %}
            </div>
          </div>
          <div class="mt-5 flex lg:mt-0 lg:ml-4 gap-3 items-center">
            <button
              type="button"
              onclick="document.getElementById('dialog-datacontract-yaml').showModal()"
              class="inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
              <svg class="-ml-0.5 mr-1.5 h-5 w-5 text-gray-600" viewBox="-0.5 -0.5 24 24">
                <path d="m4.3125 8.145833333333334 9.104166666666668 0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="m4.3125 11.020833333333334 9.104166666666668 0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="m4.3125 5.270833333333334 6.708333333333334 0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="m4.3125 13.895833333333334 7.1875 0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="m4.3125 16.770833333333336 3.8333333333333335 0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="M8.145833333333334 22.520833333333336h-6.708333333333334a0.9583333333333334 0.9583333333333334 0 0 1 -0.9583333333333334 -0.9583333333333334v-20.125a0.9583333333333334 0.9583333333333334 0 0 1 0.9583333333333334 -0.9583333333333334h12.739125a0.9583333333333334 0.9583333333333334 0 0 1 0.6775416666666667 0.28079166666666666L18.406708333333334 4.3125a0.9583333333333334 0.9583333333333334 0 0 1 0.28079166666666666 0.6775416666666667V8.145833333333334" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="m15.045833333333333 21.370833333333334 -4.025 1.15 1.15 -4.025 6.879875 -6.879875a2.032625 2.032625 0 0 1 2.875 2.875Z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="m18.188208333333332 12.478458333333334 2.875 2.875" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path><path d="m12.170833333333333 18.495833333333334 2.875 2.875" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"></path>
              </svg>
              Show YAML
            </button>
          </div>
        </div>
      </div>

      <div>
        <div class="space-y-6 mt-6">
          <section id="information">
            <div class="px-4 sm:px-0">
              <h1 class="text-base font-semibold leading-6 text-gray-900">Fundamentals</h1>
              <p class="text-sm text-gray-500">Basic information about the data contract</p>
            </div>

            <div class="mt-2 overflow-hidden bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-lg">
              <div class="px-6 py-4 space-y-4">
                <dl class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2">

                  {% if datacontract.name %}
                <div>
                  <dt class="text-sm font-medium text-gray-900">Name</dt>
                  <dd class="mt-1 text-sm text-gray-700">{{ datacontract.name }}</dd>
                </div>
                {% endif %}

                {% if datacontract.version %}
                <div>
                  <dt class="text-sm font-medium text-gray-900">Version</dt>
                  <dd class="mt-1 text-sm text-gray-700">{{ datacontract.version }}</dd>
                </div>
                {% endif %}

                  {% if datacontract.status %}
                  <div>
                    <dt class="text-sm font-medium text-gray-900">Status</dt>
                    <dd class="mt-1 text-sm text-gray-700">{{ datacontract.status }}</dd>
                  </div>
                  {% endif %}

                  {% if datacontract.dataProduct %}
                  <div>
                    <dt class="text-sm font-medium text-gray-900">Data Product</dt>
                    <dd class="mt-1 text-sm text-gray-700">{{ datacontract.dataProduct }}</dd>
                  </div>
                  {% endif %}

                  {% if datacontract.tenant %}
                  <div>
                    <dt class="text-sm font-medium text-gray-900">Tenant</dt>
                    <dd class="mt-1 text-sm text-gray-700">{{ datacontract.tenant }}</dd>
                  </div>
                  {% endif %}

                {% if datacontract.description %}
                {% if datacontract.description.purpose %}
                <div>
                  <dt class="text-sm font-medium text-gray-900">Purpose</dt>
                  <dd class="mt-1 text-sm text-gray-700">{{ datacontract.description.purpose }}</dd>
                </div>
                {% endif %}

                {% if datacontract.description.usage %}
                <div>
                  <dt class="text-sm font-medium text-gray-900">Usage</dt>
                  <dd class="mt-1 text-sm text-gray-700">{{ datacontract.description.usage }}</dd>
                </div>
                {% endif %}

                {% if datacontract.description.limitations %}
                <div>
                  <dt class="text-sm font-medium text-gray-900">Limitations</dt>
                  <dd class="mt-1 text-sm text-gray-700">{{ datacontract.description.limitations }}</dd>
                </div>
                {% endif %}
                {% endif %}

                {% if datacontract.contractCreatedTs %}
                <div>
                  <dt class="text-sm font-medium text-gray-900">Contract Created</dt>
                  <dd class="mt-1 text-sm text-gray-700">{{ datacontract.contractCreatedTs }}</dd>
                </div>
                {% endif %}
                </dl>
              </div>
            </div>
          </section>

          <section id="diagram" class="mt-6">
            <div class="px-4 sm:px-0">
              <h1 class="text-base font-semibold leading-6 text-gray-900">Entity Relationship
                Diagram</h1>
              <p class="text-sm text-gray-500">Visual representation of data model relationships</p>
            </div>
            <div class="mt-3">
              <div class="overflow-hidden bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-lg">
                <div class="diagram-container p-4 w-full" id="diagram-container">
                  <pre class="mermaid">
                    {{ mermaid_diagram }}
                  </pre>
                </div>
              </div>
            </div>
            <script type="module">
              import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';

              mermaid.initialize({
                startOnLoad: false,
                theme: 'neutral'
              });
              await mermaid.run({
                querySelector: '.mermaid',
                postRenderCallback: (id) => {
                  const container = document.getElementById("diagram-container");
                  const svgElement = container.querySelector("svg");

                  if (svgElement) {
                    // Initialize Panzoom
                    const panzoomInstance = Panzoom(svgElement, {
                      maxScale: 5,
                      minScale: 0.5,
                      step: 0.1,
                    });

                    // Mouse wheel zoom
                    container.addEventListener("wheel", (event) => {
                      event.preventDefault();
                      panzoomInstance.zoomWithWheel(event);
                    });
                  }
                }
              });
            </script>
          </section>

          <section id="schema">
            <div class="flex justify-between">
              <div class="px-4 sm:px-0">
                <h1 class="text-base font-semibold leading-6 text-gray-900">
                  Schema
                </h1>
                <p class="text-sm text-gray-500">The data schema and structure</p>
              </div>
            </div>

            {% for schema in datacontract.schema_ %}

            <div class="mt-3 flow-root">
              <div class="-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
                <div class="inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8">
                  <div
                    class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg">

                    <table class="min-w-full divide-y divide-gray-300">
                      <thead class="bg-gray-50">
                      <tr>
                        <th scope="colgroup" colspan="5"
                            class="py-2 pl-4 pr-3 text-left font-semibold text-gray-900 sm:pl-6">
                          {% if schema.name %}
                          <span class="font-semibold" id="{{ schema.name }}">{{ schema.name }}</span>
                          {% endif %}
                          {% if schema.physicalName and schema.physicalName != schema.name %}
                          <span class="font-mono font-medium text-gray-600" id="{{ schema.physicalName }}">({{ schema.physicalName }})</span>
                          {% endif %}
                          <span
                            class="inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10">{{ schema.physicalType or schema.logicalType }}</span>
                          <div class="text-sm font-medium text-gray-500">{{ schema.description }}
                          </div>
                          {% if schema.dataGranularityDescription %}
                          <div class="text-xs text-gray-400">Granularity: {{
                            schema.dataGranularityDescription }}
                          </div>
                          {% endif %}
                        </th>
                      </tr>
                      <tr>
                        <th
                          class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          Property
                        </th>
                        <th
                          class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          Business Name
                        </th>
                        <th
                          class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          Type
                        </th>
                        <th
                          class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          Required
                        </th>
                        <th
                          class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          Description
                        </th>
                      </tr>
                      </thead>
                      <tbody class="divide-y divide-gray-200 bg-white">
                      {{ render_nested_properties(schema.properties, 0) }}
                      </tbody>
                      {% if schema.quality %}
                      <tfoot class="divide-y divide-gray-200 bg-white">
                      {% for quality in schema.quality %}
                      <tr>
                        <th scope="colgroup" colspan="5"
                            class="py-2 pl-4 pr-3 text-left text-sm font-normal sm:pl-6 bg-white">
                          <div class="flex flex-col space-y-1">
                            <div class="font-medium">{{ quality.rule }}</div>
                            <div class="text-xs text-gray-500">{{ quality.description }}</div>
                            {% if quality.dimension %}
                            <span
                              class="inline-flex items-center rounded-md bg-purple-50 px-2 py-1 text-xs font-medium text-purple-800 ring-1 ring-inset ring-purple-600/20 w-fit">{{ quality.dimension }}</span>
                            {% endif %}
                          </div>
                        </th>
                      </tr>
                      {% endfor %}
                      </tfoot>
                      {% endif %}
                    </table>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </section>

          {% if datacontract.support %}
          <section id="support">
            <div class="px-4 sm:px-0">
              <h1 class="text-base font-semibold leading-6 text-gray-900">Support</h1>
              <p class="text-sm text-gray-500">Support channels and resources</p>
            </div>

            <ul role="list"
                class="mt-2 divide-y divide-gray-100 overflow-hidden bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-lg">
              {% for support in datacontract.support %}
              <li class="px-6 py-4">
                <div class="flex items-center justify-between">
                  <div class="flex items-center">
                    <div class="ml-3">
                      <p class="text-sm font-medium text-gray-900">{{ support.channel }}</p>
                      {% if support.description %}
                      <p class="text-sm text-gray-500">{{ support.description }}</p>
                      {% endif %}
                      {% if support.tool %}
                      <span
                        class="inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10">{{ support.tool }}</span>
                      {% endif %}
                    </div>
                  </div>
                  {% if support.url %}
                  <div class="ml-3">
                    <a href="{{ support.url }}" target="_blank"
                       class="text-sky-500 hover:text-sky-700 text-sm font-medium">{{ support.url
                      }}</a>
                  </div>
                  {% endif %}
                </div>
              </li>
              {% endfor %}
            </ul>
          </section>
          {% endif %}

          {% if datacontract.price %}
          <section id="pricing">
            <div class="px-4 sm:px-0">
              <h1 class="text-base font-semibold leading-6 text-gray-900">Pricing</h1>
              <p class="text-sm text-gray-500">Data contract pricing information</p>
            </div>

            <div
              class="mt-2 overflow-hidden bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-lg">
              <div class="px-6 py-4">
                <div class="flex items-center space-x-4">
                  <div class="text-2xl font-bold text-gray-900">
                    {{ datacontract.price.priceAmount }} {{ datacontract.price.priceCurrency }}
                  </div>
                  <div class="text-sm text-gray-500">
                    per {{ datacontract.price.priceUnit }}
                  </div>
                </div>
              </div>
            </div>
          </section>
          {% endif %}


          {% if datacontract.team %}
          <section id="team">
            <div class="px-4 sm:px-0">
              <h1 class="text-base font-semibold leading-6 text-gray-900">Team</h1>
              <p class="text-sm text-gray-500">Team members and their roles</p>
            </div>

            <div
              class="mt-2 overflow-hidden bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-lg">
              {# Check if old array format (deprecated) or new Team object format (v3.1.0+) #}
              {% if datacontract.team is sequence and datacontract.team is not string %}
              {# Deprecated array format #}
              {% set team_members = datacontract.team %}
              {% else %}
              {# New team format (v3.1.0+): object with name, description, members #}
              {% if datacontract.team.name or datacontract.team.description %}
              <div class="px-6 py-4 border-b border-gray-200">
                {% if datacontract.team.name %}
                <div class="text-sm font-medium text-gray-900">{{ datacontract.team.name }}</div>
                {% endif %}
                {% if datacontract.team.description %}
                <div class="text-sm text-gray-500">{{ datacontract.team.description }}</div>
                {% endif %}
              </div>
              {% endif %}
              {% set team_members = datacontract.team.members or [] %}
              {% endif %}
              <table class="min-w-full divide-y divide-gray-300">
                <thead class="bg-gray-50">
                <tr>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Username
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Role
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Date In
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Date Out
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Comment
                  </th>
                </tr>
                </thead>
                <tbody class="divide-y divide-gray-200 bg-white">
                {% for member in team_members %}
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{
                    member.username }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ member.role }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ member.dateIn or
                    "-" }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ member.dateOut or
                    "-" }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ member.comment or
                    "-" }}
                  </td>
                </tr>
                {% endfor %}
                </tbody>
              </table>
            </div>
          </section>
          {% endif %}

          {% if datacontract.roles %}
          <section id="roles">
            <div class="px-4 sm:px-0">
              <h1 class="text-base font-semibold leading-6 text-gray-900">Access Roles</h1>
              <p class="text-sm text-gray-500">Access roles and approval workflows</p>
            </div>

            <div
              class="mt-2 overflow-hidden bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-lg">
              <table class="min-w-full divide-y divide-gray-300">
                <thead class="bg-gray-50">
                <tr>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Role
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Access
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    First Level Approver
                  </th>
                  <th
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Second Level Approver
                  </th>
                </tr>
                </thead>
                <tbody class="divide-y divide-gray-200 bg-white">
                {% for role in datacontract.roles %}
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{
                    role.role }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      <span class="inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset
                        {% if role.access == 'read' %}bg-green-50 text-green-700 ring-green-600/20{% elif role.access == 'write' %}bg-blue-50 text-blue-700 ring-blue-600/20{% else %}bg-gray-50 text-gray-700 ring-gray-600/20{% endif %}">
                        {{ role.access or "-" }}
                      </span>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{
                    role.firstLevelApprovers or "-" }}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{
                    role.secondLevelApprovers or "-" }}
                  </td>
                </tr>
                {% endfor %}
                </tbody>
              </table>
            </div>
          </section>
          {% endif %}


          {% if datacontract.slaProperties %}
          <section id="sla">
            <div class="px-4 sm:px-0">
              <h1 class="text-base font-semibold leading-6 text-gray-900">Service Level Agreements</h1>
              <p class="text-sm text-gray-500">SLA properties and commitments</p>
            </div>

            <div class="mt-2 overflow-hidden bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-lg">
              <table class="min-w-full divide-y divide-gray-300">
                <thead class="bg-gray-50">
                  <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Property</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Value</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Unit</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Element</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Driver</th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-gray-200 bg-white">
                  {% for sla in datacontract.slaProperties %}
                  <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ sla.property }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ sla.value }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ sla.unit or "-" }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ sla.element or "-" }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ sla.driver or "-" }}</td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </section>
          {% endif %}


          {% if datacontract.servers %}
          <section id="servers">
            <div class="px-4 sm:px-0">
              <h1 class="text-base font-semibold leading-6 text-gray-900" id="servers">Servers</h1>
              <p class="text-sm text-gray-500">Infrastructure servers of the data contract</p>
            </div>

            <ul role="list"
                class="mt-2 divide-y divide-gray-100 overflow-hidden bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-lg">
              {% for server in datacontract.servers %}
              {{ render_partial('partials/server.html', server_name = server.server, server =
              server) }}
              {% endfor %}
            </ul>

          </section>
          {% endif %}


          {% if datacontract.customProperties %}
          <section id="custom-properties">
            <div class="px-4 sm:px-0">
              <h1 class="text-base font-semibold leading-6 text-gray-900">Custom Properties</h1>
              <p class="text-sm text-gray-500">Additional custom properties and metadata</p>
            </div>

            <div class="mt-2 overflow-hidden bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-lg">
              <table class="min-w-full divide-y divide-gray-300">
                <thead class="bg-gray-50">
                  <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Property</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Value</th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-gray-200 bg-white">
                  {% for prop in datacontract.customProperties %}
                  <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ prop.property }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {% if prop.value is iterable and prop.value is not string %}
                        {% for item in prop.value %}{{ item }}{% if not loop.last %}, {% endif %}{% endfor %}
                      {% else %}
                        {{ prop.value }}
                      {% endif %}
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </section>
          {% endif %}

        </div>
      </div>

      <div class="mt-6 text-sm text-gray-400">
        Created at {{formatted_date}} with <a href="https://cli.datacontract.com" class="text-gray-400 hover:text-gray-500">Data Contract CLI</a> v{{datacontract_cli_version}}
      </div>

    </div>
  </main>

  <dialog  id="dialog-datacontract-yaml" class="relative z-10" aria-labelledby="modal-title" aria-modal="true">
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>

    <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
      <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
        <div class="relative transform rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-4/5 sm:p-6">
          <div class="absolute right-0 top-0 pr-4 pt-4">
            <button type="button" onclick="document.getElementById('dialog-datacontract-yaml').close()" class="rounded-md bg-white text-gray-400 hover:text-gray-500">
              <span class="sr-only">Close</span>
              <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
          <div>
            <div class="mt-3 mb-3 text-center sm:mt-5">

              <h3 class="text-base font-semibold leading-6 text-gray-900" id="modal-title">Data Contract YAML</h3>
            </div>
            <pre class="overflow-x-auto text-sm bg-gray-50 p-4"><code>{{datacontract_yaml}}</code></pre>
          </div>
          <div class="mt-5 sm:mt-6">
            <button type="button" onclick="document.getElementById('dialog-datacontract-yaml').close()"
                    class="inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Close</button>
          </div>
        </div>
      </div>
    </div>
  </dialog>


  <footer class="bg-white mt-auto text-sm text-gray-400">
    <div class="mx-auto max-w-7xl py-5 px-6 md:flex md:items-center md:justify-between lg:px-8">
      <div class="flex justify-center space-x-6 md:order-2">
        <div>
          <a href="https://cli.datacontract.com" class="text-gray-400 hover:text-gray-500 px-2">Data Contract CLI</a>

          <a href="https://datacontract.com" class="text-gray-400 hover:text-gray-500 px-2">Data Contract Specification</a>
        </div>


      </div>
      <div class="mt-8 md:order-1 md:mt-0">
        <p class="text-center leading-5 text-gray-400">
          Supported by <a href="https://datacontract-manager.com"
                          class="text-gray-400 hover:text-gray-500">Data Contract Manager</a>
        </p>
      </div>
    </div>

  </footer>

</div>

</body>
</html>